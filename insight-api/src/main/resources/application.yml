spring:
  application:
    name: spring-insight-webapi
  # 数据源配置：继承并使用 storage 模块的配置（默认H2）
  # 如果需要独立配置，可在此覆盖

server:
  port: 8083
  servlet:
    context-path: /

# Actuator 端点
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
    enabled-by-default: false
  endpoint:
    health:
      enabled: true
      show-details: always
    info:
      enabled: true
    metrics:
      enabled: true
    prometheus:
      enabled: true

# SpringDoc OpenAPI 配置
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: method
    tags-sorter: alpha
    display-request-duration: true
  show-actuator: true

# 日志配置
logging:
  level:
    # 本模块日志
    io.github.iweidujiang.springinsight.api: INFO
    # 数据访问层日志（默认关闭，按需开启）
    io.github.iweidujiang.springinsight.storage.mapper: WARN
    # 控制OpenAPI文档生成日志
    org.springdoc: WARN
  pattern:
    console: '%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}} ${LOG_LEVEL_PATTERN:-%5p} [%15.15t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}'